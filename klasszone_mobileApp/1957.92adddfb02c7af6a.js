"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1957],{1957:(k,_,u)=>{u.r(_),u.d(_,{SendOtpPageModule:()=>Z});var d=u(6895),l=u(433),p=u(4731),c=u(5638),t=u(8256),y=u(1228),C=u(3914),M=u(529),b=u(4158),v=u(5016);function S(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",3,4),t.NdJ("paste",function(o){t.CHM(e);const r=t.oxw(2);return t.KtG(r.handlePaste(o))})("keyup",function(o){const s=t.CHM(e).index,g=t.oxw(2);return t.KtG(g.onKeyUp(o,s))})("input",function(o){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onInput(o))})("keydown",function(o){const s=t.CHM(e).index,g=t.oxw(2);return t.KtG(g.onKeyDown(o,s))}),t.qZA()}if(2&i){const e=a.$implicit,n=a.index,o=t.oxw(2);t.Gre("otp-input ",o.config.inputClass,""),t.hYB("id","otp_",n,"_",o.componentKey,""),t.Q6J("pattern",o.config.allowNumbersOnly?"\\d*":"")("type",o.inputType)("placeholder",(null==o.config?null:o.config.placeholder)||"")("ngStyle",o.config.inputStyles)("formControl",o.otpForm.controls[e])}}function w(i,a){if(1&i&&(t.TgZ(0,"div",1),t.YNc(1,S,2,10,"input",2),t.ALo(2,"keys"),t.qZA()),2&i){const e=t.oxw();t.Gre("ng-otp-input-wrapper wrapper ",e.config.containerClass,""),t.MGl("id","c_",e.componentKey,""),t.Q6J("ngStyle",e.config.containerStyles),t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,6,null==e.otpForm?null:e.otpForm.controls))}}class h{static ifBackspaceOrDelete(a){return this.ifKey(a,"Backspace;Delete;Del")}static ifRightArrow(a){return this.ifKey(a,"ArrowRight;Right")}static ifLeftArrow(a){return this.ifKey(a,"ArrowLeft;Left")}static ifSpacebar(a){return this.ifKey(a,"Spacebar; ")}static ifKey(a,e){return e.split(";").some(o=>o===a.key)}}let m=(()=>{class i{transform(e){return Object.keys(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"keys",type:i,pure:!0}),i})(),O=(()=>{class i{constructor(e){this.keysPipe=e,this.config={length:4},this.onInputChange=new t.vpe,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+(new Date).getTime().toString(36)}get inputType(){var e,n;return null!==(e=this.config)&&void 0!==e&&e.isPasswordInput?"password":null!==(n=this.config)&&void 0!==n&&n.allowNumbersOnly?"tel":"text"}ngOnInit(){this.otpForm=new l.cw({});for(let e=0;e<this.config.length;e++)this.otpForm.addControl(this.getControlName(e),new l.NI);this.otpForm.valueChanges.subscribe(e=>{this.keysPipe.transform(this.otpForm.controls).forEach(n=>{var o=this.otpForm.controls[n].value;o&&o.length>1&&(o.length>=this.config.length?this.setValue(o):this.rebuildValue())})})}ngAfterViewInit(){if(!this.config.disableAutoFocus){const e=document.getElementById(`c_${this.componentKey}`);if(e){const n=e.getElementsByClassName("otp-input")[0];n&&n.focus&&n.focus()}}}getControlName(e){return`ctrl_${e}`}onKeyDown(e,n){if(h.ifSpacebar(e))return e.preventDefault(),!1}onInput(e){if(this.config.allowNumbersOnly&&!this.validateNumber(this.currentVal?`${this.currentVal}${e.target.value}`:e.target.value))return e.target.value="",e.stopPropagation(),void e.preventDefault()}onKeyUp(e,n){const o=this.appendKey(`otp_${n+1}`),r=this.appendKey("otp_"+(n-1));return h.ifRightArrow(e)?(e.preventDefault(),void this.setSelected(o)):h.ifLeftArrow(e)?(e.preventDefault(),void this.setSelected(r)):h.ifBackspaceOrDelete(e)&&!e.target.value?(this.setSelected(r),void this.rebuildValue()):void(e.target.value&&(this.ifValidKeyCode(e)&&this.setSelected(o),this.rebuildValue()))}validateNumber(e){return e&&/^\d*\.?\d*$/.test(e)}appendKey(e){return`${e}_${this.componentKey}`}setSelected(e){this.focusTo(e);const n=document.getElementById(e);n&&n.setSelectionRange&&setTimeout(()=>{n.setSelectionRange(0,1)},0)}ifValidKeyCode(e){const n=e.key;return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/[a-zA-Z0-9-_]/.test(n)||this.config.allowKeyCodes&&this.config.allowKeyCodes.includes(e.keyCode)}focusTo(e){const n=document.getElementById(e);n&&n.focus()}setValue(e){if(!this.config.allowNumbersOnly||!isNaN(e)){if(this.otpForm.reset(),!e)return void this.rebuildValue();if(e=e.toString().replace(/\s/g,""),Array.from(e).forEach((o,r)=>{this.otpForm.get(this.getControlName(r))&&this.otpForm.get(this.getControlName(r)).setValue(o)}),!this.config.disableAutoFocus){const o=document.getElementById(`c_${this.componentKey}`);var n=e.length<this.config.length?e.length:this.config.length-1;let r=o.getElementsByClassName("otp-input")[n];r&&r.focus&&r.focus()}this.rebuildValue()}}rebuildValue(){var e;let n="";this.keysPipe.transform(this.otpForm.controls).forEach(o=>{if(this.otpForm.controls[o].value){let r=this.otpForm.controls[o].value,s=r.length>1,g=!this.config.allowNumbersOnly&&this.config.letterCase&&("upper"==this.config.letterCase.toLocaleLowerCase()||"lower"==this.config.letterCase.toLocaleLowerCase());r=r[0];let f=g?"upper"==this.config.letterCase.toLocaleLowerCase()?r.toUpperCase():r.toLowerCase():r;g&&f==r?g=!1:r=f,n+=r,(s||g)&&this.otpForm.controls[o].setValue(r)}}),!(null===(e=this.formCtrl)||void 0===e)&&e.setValue&&this.formCtrl.setValue(n),this.onInputChange.emit(n),this.currentVal=n}handlePaste(e){let n=e.clipboardData||window.clipboardData;if(n)var o=n.getData("Text");e.stopPropagation(),e.preventDefault(),o&&(!this.config.allowNumbersOnly||this.validateNumber(o))&&this.setValue(o)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-otp-input"]],inputs:{config:"config",formCtrl:"formCtrl"},outputs:{onInputChange:"onInputChange"},decls:1,vars:1,consts:[[3,"class","id","ngStyle",4,"ngIf"],[3,"id","ngStyle"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","class","formControl","id","paste","keyup","input","keydown",4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","formControl","id","paste","keyup","input","keydown"],["inp",""]],template:function(e,n){1&e&&t.YNc(0,w,3,8,"div",0),2&e&&t.Q6J("ngIf",null==n.otpForm?null:n.otpForm.controls)},dependencies:[d.O5,d.PC,d.sg,l.Fj,l.c5,l.JJ,l.oH,m],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]}),i})(),T=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[m],imports:[[d.ez,l.u5,l.UX]]}),i})();const D=["ngOtpInput"];function P(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"ng-otp-input",25,26),t.NdJ("onInputChange",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.onOtpChange(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("config",e.config)}}const x=function(){return["/register"]},A=function(){return["/forgot-password"]},N=[{path:"",component:(()=>{class i{constructor(e,n,o,r,s,g,f,J,F){this.authService=e,this.router=n,this.loadingController=o,this.alertCtrl=r,this.menuCtrl=s,this.commonUtils=g,this.http=f,this.storage=J,this.appComponent=F,this.isLoading=!1,this.isLogin=!0,this.model={},this.showOtpComponent=!0,this.form_submit_text="Register",this.config={allowNumbersOnly:!1,length:4,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"",inputStyles:{width:"50px",height:"50px"}},this.clickButtonTypeCheck="",this.form_submit_text_save="Register",this.form_submit_text_save_another="Save & Add Another"}onOtpChange(e){this.otp=e}ngOnInit(){this.menuCtrl.enable(!1),console.log("registerData",localStorage.getItem("registerData")),this.registrationData=JSON.parse(localStorage.getItem("registerData")||"{}"),console.log("registrationData",this.registrationData),console.log("center_id",this.registrationData.center_id),this.authService.globalparamsData.subscribe(e=>{console.log("auth res >>>>>>>>",e)}),"edit"==this.parms_action_name?(this.form_api="student/signup/"+this.parms_action_id,console.log("edit data<><><><>",this.form_api)):(this.form_api="student/signup?master=1",console.log("edit data@@@@@@@@@@@@",this.form_api))}ionViewWillEnter(){this.menuCtrl.enable(!1),this.authService.globalparamsData.subscribe(e=>{})}onSwitchAuthMode(){this.isLogin=!this.isLogin}segmentChanged(e){this.segmentValue=e.detail.value,console.log("segmentValue",this.segmentValue)}clickButtonType(e){this.clickButtonTypeCheck=e}onSubmit(e){"Register"==this.clickButtonTypeCheck?this.form_submit_text_save="Please wait":this.form_submit_text_save_another="Please wait",this.form_submit_text="Please wait";let n=new FormData;for(let o in e.value)null==e.value[o]&&(e.value[o]=""),n.append(o,e.value[o]);console.log("value >",n),e.valid&&(this.formSubmitSubscribe=this.http.post("registration",n).subscribe(o=>{"Register"==this.clickButtonTypeCheck?this.form_submit_text_save="Register":this.form_submit_text_save_another="Save & Add Another",console.log("add form response >",o),o.return_status>0?(localStorage.removeItem("registerData"),this.registrationData={},e.reset(),this.router.navigateByUrl("/auth"),this.commonUtils.presentToast("success",o.return_message)):this.commonUtils.presentToast("error",o.return_message)},o=>{"Register"==this.clickButtonTypeCheck?this.form_submit_text_save="Register":this.form_submit_text_save_another="Save & Add Another",this.form_submit_text="Register"}))}showAlert(e){this.alertCtrl.create({header:"Authentication failed",message:e,buttons:["Okay"]}).then(n=>n.present())}ngOnDestroy(){void 0!==this.formSubmitSubscribe&&this.formSubmitSubscribe.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.e),t.Y36(c.F0),t.Y36(p.HT),t.Y36(p.Br),t.Y36(p._q),t.Y36(C.D),t.Y36(M.eN),t.Y36(b.Ke),t.Y36(v.y))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-send-otp"]],viewQuery:function(e,n){if(1&e&&t.Gf(D,5),2&e){let o;t.iGM(o=t.CRH())&&(n.ngOtpInput=o.first)}},decls:38,vars:18,consts:[[1,"transparent-header",3,"translucent"],["slot","start"],[1,"ion-text-end",3,"routerLink"],[3,"fullscreen"],[1,"login-screen"],[1,"login-header"],[3,"ngSubmit","keyup.enter"],["userAddForm","ngForm"],[1,"login-inner"],["type","hidden","name","user_belongs_group",3,"ngModel","ngModelChange"],["type","hidden","name","first_name",3,"ngModel","ngModelChange"],["type","hidden","name","last_name",3,"ngModel","ngModelChange"],["type","hidden","name","identity",3,"ngModel","ngModelChange"],["type","hidden","name","password",3,"ngModel","ngModelChange"],["type","hidden","name","confirm_password",3,"ngModel","ngModelChange"],["type","hidden","name","phone_number",3,"ngModel","ngModelChange"],["type","hidden","name","phone_code",3,"ngModel","ngModelChange"],["type","hidden","name","referral_code",3,"ngModel","ngModelChange"],["type","hidden","maxlength","4","minlength","4","required","","name","otp",3,"ngModel","ngModelChange"],["size","12"],[1,"field-item"],[3,"config","onInputChange",4,"ngIf"],[1,"ion-float-right",3,"routerLink"],[1,"custom-btn"],["type","submit","expand","block","shape","round",3,"disabled"],[3,"config","onInputChange"],["ngOtpInput",""]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-back-button"),t.qZA(),t.TgZ(4,"ion-title",2),t._uU(5,"Register"),t.qZA()()(),t.TgZ(6,"ion-content",3)(7,"div",4)(8,"div",5)(9,"h2"),t._uU(10,"Send OTP"),t.qZA(),t.TgZ(11,"p"),t._uU(12,"We take the security and privacy of your information seriously, and we employ industry-standard measures to protect your data."),t.qZA()(),t.TgZ(13,"form",6,7),t.NdJ("ngSubmit",function(){t.CHM(o);const s=t.MAs(14);return t.KtG(n.onSubmit(s))})("keyup.enter",function(){t.CHM(o);const s=t.MAs(14);return t.KtG(n.onSubmit(s))}),t.TgZ(15,"div",8)(16,"ion-grid")(17,"ion-row")(18,"input",9),t.NdJ("ngModelChange",function(s){return n.registrationData.center_id=s}),t.qZA(),t.TgZ(19,"input",10),t.NdJ("ngModelChange",function(s){return n.registrationData.first_name=s}),t.qZA(),t.TgZ(20,"input",11),t.NdJ("ngModelChange",function(s){return n.registrationData.last_name=s}),t.qZA(),t.TgZ(21,"input",12),t.NdJ("ngModelChange",function(s){return n.registrationData.identity=s}),t.qZA(),t.TgZ(22,"input",13),t.NdJ("ngModelChange",function(s){return n.registrationData.password=s}),t.qZA(),t.TgZ(23,"input",14),t.NdJ("ngModelChange",function(s){return n.registrationData.confirm_password=s}),t.qZA(),t.TgZ(24,"input",15),t.NdJ("ngModelChange",function(s){return n.registrationData.mobile=s}),t.qZA(),t.TgZ(25,"input",16),t.NdJ("ngModelChange",function(s){return n.registrationData.phone_code=s}),t.qZA(),t.TgZ(26,"input",17),t.NdJ("ngModelChange",function(s){return n.registrationData.referral_code=s}),t.qZA(),t.TgZ(27,"input",18),t.NdJ("ngModelChange",function(s){return n.otp=s}),t.qZA(),t.TgZ(28,"ion-col",19)(29,"div",20),t.YNc(30,P,2,1,"ng-otp-input",21),t.qZA()(),t.TgZ(31,"ion-col",19)(32,"ion-label",22),t._uU(33,"Forgot Password?"),t.qZA()(),t.TgZ(34,"ion-col",19)(35,"div",23)(36,"ion-button",24),t._uU(37," Create an account "),t.qZA()()()()()()()()()}if(2&e){const o=t.MAs(14);t.Q6J("translucent",!0),t.xp6(4),t.Q6J("routerLink",t.DdM(16,x)),t.xp6(2),t.Q6J("fullscreen",!0),t.xp6(12),t.Q6J("ngModel",n.registrationData.center_id),t.xp6(1),t.Q6J("ngModel",n.registrationData.first_name),t.xp6(1),t.Q6J("ngModel",n.registrationData.last_name),t.xp6(1),t.Q6J("ngModel",n.registrationData.identity),t.xp6(1),t.Q6J("ngModel",n.registrationData.password),t.xp6(1),t.Q6J("ngModel",n.registrationData.confirm_password),t.xp6(1),t.Q6J("ngModel",n.registrationData.mobile),t.xp6(1),t.Q6J("ngModel",n.registrationData.phone_code),t.xp6(1),t.Q6J("ngModel",n.registrationData.referral_code),t.xp6(1),t.Q6J("ngModel",n.otp),t.xp6(3),t.Q6J("ngIf",n.showOtpComponent),t.xp6(2),t.Q6J("routerLink",t.DdM(17,A)),t.xp6(4),t.Q6J("disabled",!o.valid)}},dependencies:[d.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.wO,l.nD,l.On,l.F,p.oU,p.YG,p.Sm,p.wI,p.W2,p.jY,p.Gu,p.Q$,p.Nd,p.wd,p.sr,p.cs,p.YI,O,c.rH],styles:["ion-content[_ngcontent-%COMP%]{--background: #11367A}"]}),i})()}];let I=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.Bz.forChild(N),c.Bz]}),i})(),Z=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,l.u5,p.Pc,T,I]}),i})()}}]);